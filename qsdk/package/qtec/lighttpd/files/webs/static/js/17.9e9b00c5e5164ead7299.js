webpackJsonp([17],{471:function(t,s,e){function i(t){e(544)}var o=e(53)(e(546),e(547),i,"data-v-001b6b72",null);t.exports=o.exports},544:function(t,s,e){var i=e(545);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(462)("35d23ad9",i,!0)},545:function(t,s,e){s=t.exports=e(461)(!1),s.push([t.i,".manage-pwd-chage-container[data-v-001b6b72]{max-width:16rem;margin:0 auto;padding-top:1.173333rem}.manage-pwd-chage[data-v-001b6b72]{text-align:left}.form-item[data-v-001b6b72]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;height:1.33333rem;font-size:.4rem;border-bottom:.013333rem solid hsla(0,0%,74%,.5)}.pwd-rule[data-v-001b6b72]{display:inline-block;color:red;padding:.2rem 0;font-size:.36rem;text-align:right;width:100%}.confirm-box-btn[data-v-001b6b72],.tip-btn[data-v-001b6b72]{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-top:.013333rem solid hsla(0,0%,74%,.5)}.confirm-box-btn button[data-v-001b6b72]{width:50%;background-color:#fff;color:#179cf3;padding:.2rem 0}.confirm-box-btn button[data-v-001b6b72]:first-child{border-right:.013333rem solid hsla(0,0%,74%,.5)}",""])},546:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={mounted:function(){},data:function(){return{disabled:!1,oldpwd:"",newpwd:"",confirmpwd:"",showoldpwd:!1,showNewPassword:!1,showConfirmPassword:!1,confirmShow:!1,tipShow:!1,tip:"",resultTip:!1,result:"",resultInfo:""}},methods:{beforeRouteLeave:function(t,s,e){this.destroyed()},back:function(){this.$router.push({path:"home"})},save:function(){if(0==this.oldpwd.length)return void this.resultShow(0,"请输入4-63位旧密码");if(-1==this.cn_test(this.oldpwd))return void this.resultShow(0,"旧密码不支持中文字符");if(this.illegalpwd(this.oldpwd))return void this.resultShow(0,this.illegalpwd(this.oldpwd));var t=/^.{4,63}$/;return t.test(this.oldpwd)?0==this.newpwd.length?void this.resultShow(0,"请输入4-63位新密码"):-1==this.cn_test(this.newpwd)?void this.resultShow(0,"新密码不支持中文字符"):this.illegalpwd(this.newpwd)?void this.resultShow(0,this.illegalpwd(this.newpwd)):t.test(this.newpwd)?this.newpwd===this.oldpwd?void this.resultShow(0,"新密码和旧密码不能相同"):0==this.confirmpwd.length?void this.resultShow(0,"请输入4-63位确认密码"):-1==this.cn_test(this.confirmpwd)?void this.resultShow(0,"确认密码不支持中文字符"):this.illegalpwd(this.confirmpwd)?void this.resultShow(0,this.illegalpwd(this.confirmpwd)):t.test(this.confirmpwd)?this.newpwd!==this.confirmpwd?void this.resultShow(0,"新密码和确认密码输入不同"):(this.disabled=!0,void(this.confirmShow=!0)):void this.resultShow(0,"请输入4-63位确认密码"):void this.resultShow(0,"请输入4-63位新密码"):void this.resultShow(0,"请输入4-63位旧密码")},submit:function(){this.disabled=!0,this.confirmShow=!1,this.resultShow(-1,-1),this.getkey()},getkey:function(){var t={requestUrl:"getkeycfg",method:"get"},s=this.oldpwd,e=this.newpwd,i=this;this.$ajax({data:t}).then(function(t){if(0==t.data.errorcode){var o=new JSEncrypt,a=t.data.data.rand_key;o.setPublicKey(a);var d=o.encrypt(s),n=o.encrypt(e);i.submitPass(d,n)}else i.disabled=!1,i.error_msg(t.data)}).catch(function(t){i.disabled=!1,i.resultShow(0,"网络异常，请检查")})},submitPass:function(t,s){var e={data:{username:"admin",oldpassword:t,password:s},requestUrl:"reset_guipassword_cfg",method:"put"},i=this;this.$ajax({data:e}).then(function(t){0==t.data.errorcode?(window.localStorage.removeItem("qtec_router_token"),i.resultShow(1,"密码修改成功"),setTimeout(function(){i.$router.push({path:"login"})},2e3)):-93==t.data.errorcode?i.resultShow(0,"原密码错误"):i.error_msg(t.data),i.disabled=!1}).catch(function(t){i.disabled=!1,i.resultShow(0,"网络异常，请检查")})},changeoldpwdType:function(){this.showoldpwd=!this.showoldpwd},changeNewPassWordType:function(){this.showNewPassword=!this.showNewPassword},changeConfirmPassWordType:function(){this.showConfirmPassword=!this.showConfirmPassword},close:function(){this.disabled=this.confirmShow=!1}}}},547:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"manage-pwd-chage-container container"},[e("header",{staticClass:"header"},[e("span",{staticClass:"back-icon",on:{click:function(s){t.back()}}}),t._v(" "),e("span",{staticClass:"theme"},[t._v("管理密码修改")]),t._v(" "),e("div",{staticClass:"save"},[e("button",{attrs:{type:"button",disabled:t.disabled},on:{click:function(s){t.save()}}},[t._v("保存")])])]),t._v(" "),e("div",{staticClass:"manage-pwd-chage"},[e("div",{staticClass:"form-item"},[e("label",[t._v("原密码")]),t._v(" "),e("div",{staticClass:"pwd-transform"},[t.showoldpwd?e("input",{directives:[{name:"model",rawName:"v-model",value:t.oldpwd,expression:"oldpwd"}],attrs:{type:"text",maxlength:"63",placeholder:"输入原密码"},domProps:{value:t.oldpwd},on:{input:function(s){s.target.composing||(t.oldpwd=s.target.value)}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.oldpwd,expression:"oldpwd"}],attrs:{type:"password",maxlength:"63",placeholder:"输入原密码"},domProps:{value:t.oldpwd},on:{input:function(s){s.target.composing||(t.oldpwd=s.target.value)}}}),t._v(" "),e("div",{staticClass:"button_switch",on:{click:function(s){t.changeoldpwdType()}}},[t.showoldpwd?e("div",{staticClass:"showPassword"}):e("div",{staticClass:"hidePassword"})])])]),t._v(" "),e("div",{staticClass:"form-item"},[e("label",[t._v("新密码")]),t._v(" "),e("div",{staticClass:"pwd-transform"},[t.showNewPassword?e("input",{directives:[{name:"model",rawName:"v-model",value:t.newpwd,expression:"newpwd"}],attrs:{type:"text",maxlength:"63",placeholder:"输入新密码"},domProps:{value:t.newpwd},on:{input:function(s){s.target.composing||(t.newpwd=s.target.value)}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.newpwd,expression:"newpwd"}],attrs:{type:"password",maxlength:"63",placeholder:"输入新密码"},domProps:{value:t.newpwd},on:{input:function(s){s.target.composing||(t.newpwd=s.target.value)}}}),t._v(" "),e("div",{staticClass:"button_switch",on:{click:function(s){t.changeNewPassWordType()}}},[t.showNewPassword?e("div",{staticClass:"showPassword"}):e("div",{staticClass:"hidePassword"})])])]),t._v(" "),e("div",{staticClass:"form-item"},[e("label",[t._v("确认密码")]),t._v(" "),e("div",{staticClass:"pwd-transform"},[t.showConfirmPassword?e("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmpwd,expression:"confirmpwd"}],attrs:{type:"text",maxlength:"63",placeholder:"再次输入新密码进行确认"},domProps:{value:t.confirmpwd},on:{input:function(s){s.target.composing||(t.confirmpwd=s.target.value)}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmpwd,expression:"confirmpwd"}],attrs:{type:"password",maxlength:"63",placeholder:"再次输入新密码进行确认"},domProps:{value:t.confirmpwd},on:{input:function(s){s.target.composing||(t.confirmpwd=s.target.value)}}}),t._v(" "),e("div",{staticClass:"button_switch",on:{click:function(s){t.changeConfirmPassWordType()}}},[t.showConfirmPassword?e("div",{staticClass:"showPassword"}):e("div",{staticClass:"hidePassword"})])])]),t._v(" "),e("span",{staticClass:"pwd-rule"},[t._v("*密码长度4-63位")])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.confirmShow,expression:"confirmShow"}],staticClass:"loading"},[e("div",{staticClass:"tip-box"},[e("span",{staticClass:"tip-header"},[t._v("提示")]),t._v(" "),e("span",{staticClass:"tip-main"},[t._v("确认修改管理密码？")]),t._v(" "),e("div",{staticClass:"confirm-box-btn"},[e("button",{attrs:{type:"button"},on:{click:function(s){t.close()}}},[t._v("取消")]),t._v(" "),e("button",{attrs:{type:"button"},on:{click:function(s){t.submit()}}},[t._v("确认")])])])]),t._v(" "),t.tipShow?e("div",{staticClass:"loading"},[e("div",{staticClass:"tip-box"},[e("span",{staticClass:"tip-header"},[t._v("提示")]),t._v(" "),e("span",{staticClass:"tip-main"},[t._v(t._s(t.tip))])])]):t._e(),t._v(" "),e("resultshow",{attrs:{resultTip:t.resultTip,result:t.result,resultInfo:t.resultInfo}})],1)},staticRenderFns:[]}}});